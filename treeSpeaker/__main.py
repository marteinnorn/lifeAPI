#!/usr/bin/env python

# --------------------------------------------------------------------------------------------------------------------------------------------
# DESCRIPTION
# --------------------------------------------------------------------------------------------------------------------------------------------
'''

'''
# --------------------------------------------------------------------------------------------------------------------------------------------
# AUTHORS
# --------------------------------------------------------------------------------------------------------------------------------------------

__authors__ = ['marteinn']

# --------------------------------------------------------------------------------------------------------------------------------------------
# IMPORTS
# --------------------------------------------------------------------------------------------------------------------------------------------

import urllib
import pycurl
import os

# --------------------------------------------------------------------------------------------------------------------------------------------
# PATHS
# --------------------------------------------------------------------------------------------------------------------------------------------


# --------------------------------------------------------------------------------------------------------------------------------------------
# GLOBAL VARIABLES
# --------------------------------------------------------------------------------------------------------------------------------------------

basePath = __file__.rstrip(__name__+'.py')

# --------------------------------------------------------------------------------------------------------------------------------------------
# CODE
# --------------------------------------------------------------------------------------------------------------------------------------------



def getURL(phrase):

    googleTranslateURL = 'http://translate.google.com/translate_tts?tl=en&'
    parameters = {'q': phrase}
    data = urllib.urlencode(parameters)
    googleTranslateURL = '%s%s' % (googleTranslateURL,data)
    return googleTranslateURL


def downloadFile(url, path=basePath+'soundfiles'):

    fp = open(path+'/text.mp3', 'wb')
    curl = pycurl.Curl()
    curl.setopt(pycurl.URL, url)
    curl.setopt(pycurl.WRITEDATA, fp)
    curl.perform()
    curl.close()
    fp.close()
    return fp.name


def textToFile(text, path=basePath+'soundfiles'):

    text = str(text)
    textUrl = getURL(text)
    textFile = downloadFile(textUrl,path)
    return textFile